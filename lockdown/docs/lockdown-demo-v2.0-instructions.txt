Lockdown Demo Guide v2.0

Author: Amit Vasudevan (amitvasudevan@acm.org)
========================================================================

Notes: 
(a) The disk-image used for the demo is designed to work 
    only on the hp8540p laptop
(b) Repository pathnames are relative to the top-level Lockdown
    project repository


Requirements
------------
1. Lockdown demo disk image (see /trunk/docs/lockdown-demo-v2.0-diskimage.txt)
2. Lockdown verifier device (as of this writing based on a 
		DS2148WZ board)
3. HP 8540p Laptop
4. 120GB SATA laptop hard-disk

Initial Setup
-------------	
1. Burn Lockdown demo disk image to the 120GB SATA laptop hard-disk
   e.g., using dd on a different machine
	
2. Plug in the 120GB SATA hard-disk into the HP 8540p laptop and boot

3. At the first GRUB menu, press the <up-arrow> key to disengage
   autoboot and select the "Ubuntu 10.04.3 LTS Service Console"
   and boot into it
	
4. Program the Lockdown Verifier (see /trunk/docs/lockdown-verifier-ds2148wz-instructions.txt)

5. Build the Lockdown hypervisor (see /trunk/docs/lockdown-hypervisor-instructions.txt)

6. Generate trusted environment parameter block binary blob (see /trunk/docs/lockdown-teparameterblock-instructions.txt)

7. Build the Lockdown environment monitor (see /trunk/docs/lockdown-monitor-instructions.txt)

8. Copy hypervisor (init-x86.bin and hypervisor-x86.bin.gz),
   monitor (ldnvfctl.exe) and trusted environment parameter block
   (ldnpb_te.bin) binary images to /mnt/bootpartition/boot

9. Copy /mnt/bootpartition/grub/menu_ue.lst 
	to /mnt/boot/partition/grub/menu.lst

10. Power down the laptop. You are now ready for the demo 

Running the demo
----------------

1. Connect the Lockdown verifier to the laptop and ensure 
   that the switch is set to the untrusted environment (red)

2. Power on the laptop. You will notice the verifier will 
   start a blinking red light

3. You will automatically boot using the Lockdown hypervisor 
   into the untrusted environment. Once the environment has 
   loaded, the blinking red will glow solid red

4. Do required operations in the untrusted environment
   (e.g., visit a website, browse facebook etc.)
   
5. Slide the verifier switch to trusted (green) and Lockdown 
   will start the environment switch. The Lockdown verifier
   light will switch to blinking red and system will automatically
   boot into the trusted environment. (Note: do not interact with
   the GRUB menu that you will see as part of the platform reset
   sequence)

6. Once the trusted environment has booted up, the Lockdown 
   verifier will glow soild green signifying you are ready to
   perform required sensitive operations.

7. Slide the verifier switch back to untrusted to switch back to
   the untrusted environment.


Note: The first time you do the untrusted to trusted cycle it might
take a little longer since the hibernation images are not built up 
yet (the OS goes through the complete boot sequence). Subsequent 
transitions should be much faster.


Updating the hypervisor/verifier/monitor/trusted-environment
------------------------------------------------------------

If you wish to update the Lockdown hypervisor, verifier, monitor
and/or the trusted environment contents, you will need to follow
the following steps:

1. Power up the laptop

2. On the GRUB menu press <up-arrow> to disengage autoboot

3. Select Lockdown(Trusted), boot and "restart" the OS (e.g., Win 2K3)
   This will ensure that the trusted environment
   hibernation image is deleted.

4. Upon restart on the GRUB menu press <up-arrow> to disengage autoboot

5. Select Lockdown (Untrusted), boot and "restart" the OS (e.g., Win XP)
   This will ensure that the untrusted environment
   hibernation image is deleted.

6. Continue from Step-3 in section "Initial Setup" above












