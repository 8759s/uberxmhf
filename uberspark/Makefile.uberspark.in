######
# top-level Makefile for UberSpark
# author: amit vasudevan (amitvasudevan@acm.org)
######


###### autoconf controlled variables

export AC_PREFIX=@prefix@
export AC_EXEC_PREFIX=@exec_prefix@
export AC_LIBDIR=@libdir@
export AC_INCLUDEDIR=@includedir@
export AC_PKGCONFIGDIR=@pkgconfigdir@
export AC_PKGINCLUDEDIR=@pkgincludedir@


###### paths

export USPARK_DIR := $(realpath $(dir $(lastword $(MAKEFILE_LIST))))
export USPARK_HWMDIR := $(USPARK_DIR)/hwm
export USPARK_LIBSDIR := $(USPARK_DIR)/libs
export USPARK_INCLUDEDIR := $(USPARK_DIR)/include
export USPARK_TOOLSDIR := $(USPARK_DIR)/tools
export USPARK_OBJDIR = $(USPARK_DIR)/_objects



###### targets

.PHONY: build-tools
build-tools:
	

.PHONY: all
all:
	@echo $(AC_PREFIX)
	@echo $(AC_LIBDIR)
	@echo $(USPARK_DIR)
	@echo $(USPARK_OBJDIR)
	@echo $(USPARK_HWMDIR)
	@echo $(USPARK_LIBSDIR)
	@echo $(USPARK_INCLUDEDIR)
	@echo $(USPARK_TOOLSDIR)
	

.PHONY: clean
clean:

# http://www.gnu.org/software/automake/manual/automake.html#Clean
.PHONY: distclean
distclean: clean
	$(RM) config.log config.status
	$(RM) -rf Makefile.uberspark


###### autoconf rules

Makefile.uberspark: Makefile.uberspark.in config.status
	./config.status $@

config.status: configure.uberspark
	./config.status --recheck

configure.uberspark: configure.uberspark.ac
	autoconf --output=configure.uberspark configure.uberspark.ac

